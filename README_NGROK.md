# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ngrok –¥–ª—è Telegram –±–æ—Ç–∞

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è ngrok

### Windows (—á–µ—Ä–µ–∑ Chocolatey)
```powershell
choco install ngrok
```

### macOS (—á–µ—Ä–µ–∑ Homebrew)
```bash
brew install ngrok
```

### –ê–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –≤—Ä—É—á–Ω—É
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ https://ngrok.com/download
2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ ngrok –¥–ª—è –≤–∞—à–æ—ó –û–°
3. –†–æ–∑–ø–∞–∫—É–π—Ç–µ —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –¥–æ PATH

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è ngrok (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É)

–Ø–∫—â–æ —É –≤–∞—Å —î –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∞–∫–∞—É–Ω—Ç ngrok, –≤–∏ –º–æ–∂–µ—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è:

```bash
ngrok config add-authtoken YOUR_AUTH_TOKEN
```

–ê–±–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (–±—É–¥–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ 2 –≥–æ–¥–∏–Ω–∏ —Å–µ—Å—ñ—ó).

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å backend —Å–µ—Ä–≤–µ—Ä

–£ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ ‚Ññ1:
```bash
cd backend
npm run dev
```

### 2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å ngrok —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ webhook

**Windows (PowerShell):**
–£ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ ‚Ññ2:
```powershell
cd backend
.\scripts\startNgrok.ps1
```

**Windows/Linux/macOS (Node.js):**
–£ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ ‚Ññ2:
```bash
cd backend
npm run ngrok
```

–ê–±–æ:
```bash
node scripts/startNgrok.js
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- –ó–∞–ø—É—Å—Ç–∏—Ç—å ngrok –¥–ª—è –ø—Ä–æ–∫—Å—ñ—é–≤–∞–Ω–Ω—è –ø–æ—Ä—Ç—É 5000 (–∞–±–æ PORT –∑ .env)
- –û—Ç—Ä–∏–º–∞—î –ø—É–±–ª—ñ—á–Ω–∏–π URL
- –ù–∞–ª–∞—à—Ç—É—î webhook –¥–ª—è Telegram –±–æ—Ç–∞
- –ü–æ–∫–∞–∂–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ webhook

### 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ webhook

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
- üåê –ü—É–±–ª—ñ—á–Ω–∏–π ngrok URL
- ‚úÖ –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è webhook
- üìä –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ ngrok web interface (http://localhost:4040)

### 4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Telegram –±–æ—Ç–∞
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start` –∞–±–æ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ backend —Å–µ—Ä–≤–µ—Ä–∞ - –ø–æ–≤–∏–Ω–Ω—ñ –∑'—è–≤–∏—Ç–∏—Å—è –∑–∞–ø–∏—Ç–∏ –¥–æ `/api/telegram/webhook`

## –í–∞–∂–ª–∏–≤–æ

‚ö†Ô∏è **ngrok URL –∑–º—ñ–Ω—é—î—Ç—å—Å—è** –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É (—è–∫—â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å—Ç–∞—Ç–∏—á–Ω–∏–π –¥–æ–º–µ–Ω).

‚ö†Ô∏è **–î–ª—è production** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–Ω–∏–π –¥–æ–º–µ–Ω –∞–±–æ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ webhook –≤—Ä—É—á–Ω—É:
```bash
node scripts/setupWebhook.js https://your-domain.com
```

## –ó—É–ø–∏–Ω–∫–∞

–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `Ctrl+C` –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ, –¥–µ –∑–∞–ø—É—â–µ–Ω–æ ngrok, —â–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –ø—Ä–æ–∫—Å—ñ—é–≤–∞–Ω–Ω—è.

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ç–æ—á–Ω–æ–≥–æ webhook

```bash
node scripts/checkWebhook.js
```

## –†—É—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è webhook

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Ä—É—á–Ω—É –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ webhook –∑ ngrok URL:

```bash
node scripts/setupWebhook.js https://abc123.ngrok-free.app
```

–ó–∞–º—ñ–Ω—ñ—Ç—å `abc123.ngrok-free.app` –Ω–∞ –≤–∞—à ngrok URL.

