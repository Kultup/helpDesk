# Redis конфігураційний файл для Help Desk проекту
# Використовуйте цей файл для кастомних налаштувань Redis

# Базові налаштування
bind 0.0.0.0
port 6379
protected-mode yes

# Пароль (встановіть в .env файлі)
# requirepass your_strong_password_here

# Персистентність даних
# RDB (швидкий snapshot)
save 900 1      # Зберегти якщо принаймні 1 ключ змінився за 900 секунд
save 300 10     # Зберегти якщо принаймні 10 ключів змінилися за 300 секунд
save 60 10000   # Зберегти якщо принаймні 10000 ключів змінилися за 60 секунд

# AOF (append-only file) - більш надійний, але повільніший
appendonly yes
appendfsync everysec  # Синхронізація кожну секунду (баланс між швидкістю та надійністю)
# appendfsync always  # Синхронізація при кожній операції (найнадійніший, найповільніший)
# appendfsync no       # Синхронізація тільки коли операційна система вирішить (найшвидший)

# Обмеження пам'яті
maxmemory 256mb
maxmemory-policy allkeys-lru  # Видаляти найменш використовувані ключі

# Логування
loglevel notice  # notice, warning, error
logfile ""

# Клієнти
maxclients 10000
timeout 300  # Розрив з'єднання після 300 секунд неактивності

# База даних
databases 16

# Оптимізація
tcp-keepalive 300
tcp-backlog 511

# Безпека
# rename-command FLUSHDB ""
# rename-command FLUSHALL ""
# rename-command CONFIG ""

# Медлені запити (логуються запити повільніші за 10000 мікросекунд)
slowlog-log-slower-than 10000
slowlog-max-len 128

