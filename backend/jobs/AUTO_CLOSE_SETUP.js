/**
 * Інструкція для ініціалізації Auto-Close Job
 * 
 * Auto-Close Job автоматично закриває тікети у статусі "resolved" 
 * після певної кількості днів (за замовчуванням 7 днів).
 */

// ============================================
// КРОК 1: Додати змінні в .env файл
// ============================================

// Додайте наступні рядки в backend/.env:

AUTO_CLOSE_DAYS = 7
NOTIFY_AUTO_CLOSE = true

// ============================================
// КРОК 2: Встановити залежність node-cron
// ============================================

// Виконайте в терміналі:
// cd backend
// npm install node-cron

// ============================================
// КРОК 3: Додати ініціалізацію в app.js
// ============================================

// Знайдіть в app.js блок після "Ініціалізуємо WebSocket сервіс для реєстрації"
// та додайте наступний код:

/*
  // Ініціалізуємо автоматичне закриття resolved тікетів
  const { setupAutoCloseJob } = require('./jobs/autoCloseTickets');
  setupAutoCloseJob();
*/

// ============================================
// КРОК 4: Перезапустити сервер
// ============================================

// pm2 restart helpdesk-backend

// ============================================
// ТЕСТУВАННЯ
// ============================================

// Для тестування можна викликати функцію вручну:
// node -e "require('./jobs/autoCloseTickets').autoCloseResolvedTickets().then(r => console.log(r))"

// ============================================
// РОЗКЛАД ВИКОНАННЯ
// ============================================

// Job запускається автоматично щодня о 02:00 ночі
// Формат cron: '0 2 * * *'
// - 0 - хвилина (0)
// - 2 - година (02:00)
// - * - день місяця (кожен)
// - * - місяць (кожен)
// - * - день тижня (кожен)

// ============================================
// ЛОГИ
// ============================================

// Перевірити логи виконання:
// pm2 logs helpdesk-backend | grep "автозакрит"

module.exports = `
Інструкція для ініціалізації Auto-Close Job готова.
Виконайте кроки 1-4 для активації функціоналу.
`;
